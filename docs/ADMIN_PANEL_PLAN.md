# План реализации Админ-панели

Этот документ описывает создание функционала для управления пользователями непосредственно из Telegram Mini App.

## 1. Изменения в Таблицах (Google Sheets)

### Лист `Users`
- Добавить колонку **`Role`**.
- Допустимые значения: `admin`, `user`.

## 2. Логика Backend (GAS)

### Новые эндпоинты
1. `GET ?userId={adminId}&action=getUsers`: Возвращает полный список пользователей.
2. `POST { action: 'updateUser', targetUserId: '...', data: { name, status, contractor, role } }`: Обновление данных.
3. `POST { action: 'deleteUser', targetUserId: '...' }`: Удаление пользователя.

### Безопасность
- Каждая админ-функция в GAS должна сначала вызывать `checkUserAccess` и проверять, что `access.role === 'admin'`.

## 3. UI/UX во Flutter

### Экран администратора (`AdminScreen`)
- Список всех пользователей с цветовой индикацией статуса (активен/заблокирован).
- Поиск по имени или ID.
- Форма добавления нового пользователя.
- Кнопки быстрого изменения статуса и удаления.

### Навигация
- Кнопка на главном экране, отображаемая по условию: `initialData.role == 'admin'`.

## 4. Этапы реализации
- [x] Шаг 1: Обновление таблицы (Добавление колонки Role).
- [x] Шаг 2: Обновление моделей во Flutter и GAS для поддержки ролей.
- [x] Шаг 3: Реализация CRUD-операций в GAS.
- [ ] Шаг 4: Создание интерфейса админ-панели (Добавление кнопки "Добавить пользователя").

